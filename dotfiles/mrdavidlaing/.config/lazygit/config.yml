# Lazygit configuration for mrdavidlaing
# Optimized for monitoring AI assistant changes in tmux/WezTerm environment

gui:
  # Theme matching WezTerm Solarized Dark (only essential overrides)
  theme:
    activeBorderColor:
      - cyan
      - bold
    selectedLineBgColor:
      - blue
      - bold
  
  # UI preferences for AI monitoring workflow
  showFileTree: true
  showRandomTip: false
  showBranchCommitHash: true
  showBottomLine: false
  showCommandLog: false
  mouseEvents: true
  scrollHeight: 2
  sidePanelWidth: 0.3333

git:
  
  # Commit preferences (only non-defaults)
  commit:
    autoWrapCommitMessage: true
    autoWrapWidth: 72
  
  # Logging
  log:
    order: 'topo-order'
    showGraph: 'always'
    showWholeGraph: false
  
  # Skip hooks for WIP commits (useful when AI makes temporary commits)
  skipHookPrefix: 'WIP'
  
  # Branch handling
  mainBranches: ['master', 'main', 'develop']
  autoStashAfterCheckout: true
  
  # Submodule support (important for your use case)
  submodules:
    recurse: true

# Operating system integration
os:
  # Use nvim as default editor
  edit: 'nvim {{filename}}'
  editAtLine: 'nvim +{{line}} {{filename}}'
  editAtLineAndWait: 'nvim +{{line}} {{filename}}'
  open: 'open {{filename}}'
  openLink: 'open {{link}}'

# Custom commands for AI monitoring workflow
customCommands:
  # Note: 'S' removed - use built-in 'a' to stage all
  # Note: 'e' removed - built-in edit works fine
    
  # Quick commit for AI changes
  - key: 'C'
    context: 'files'
    prompts:
      - type: 'input'
        title: 'Commit message:'
        key: 'CommitMessage'
        initialValue: 'AI: '
    command: 'git add -A && git commit -m "{{.Form.CommitMessage}}"'
    description: 'Stage all and commit with message'
    
  # Update all submodules
  - key: 'u'
    context: 'submodules'
    command: 'git submodule update --init --recursive'
    description: 'Update all submodules'
    loadingText: 'Updating submodules...'
    
  # View diff in nvim
  - key: 'D'
    context: 'files'
    command: 'git diff {{.SelectedFile.Name}} | nvim -R -'
    description: 'View diff in nvim'
    output: terminal
    
  # Quick amend (useful for fixing AI commits)
  - key: 'A'
    context: 'commits'
    command: 'git commit --amend --no-edit'
    description: 'Amend last commit (no edit)'
    
  # Push with force-with-lease (safer than force push)
  - key: 'P'
    context: 'status'
    command: 'git push --force-with-lease'
    description: 'Force push with lease'
    
  # Show file history
  - key: 'H'
    context: 'files'
    command: 'git log --oneline --follow -- {{.SelectedFile.Name}}'
    description: 'Show file history'
    output: terminal

# Keybinding overrides (only non-defaults)
# keybinding section removed - using all defaults

# Update and reporting (defaults are fine)
# update.method: never and reporting: off are defaults

# Enhanced diff view
paging:
  colorArg: always
  pager: delta --dark --paging=never --24-bit-color=never --no-gitconfig

# Services (for opening PRs, etc.)
services:
  github.com: 'gh pr view --web {{.PrNumber}}'