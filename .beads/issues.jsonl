{"id":"LV-c699","title":"Fix CI failures present on 1 Nov 2025","description":"Multiple CI test failures are preventing the build from passing. These failures are unrelated to recent code changes and appear to be pre-existing issues that need to be resolved.\n\nContext:\n- All failures observed in GitHub Actions runs on 2025-11-01\n- Failures span multiple platforms: Windows, macOS, and Arch Linux\n- The Nix-based tests are passing successfully\n\nImpact:\n- CI pipeline is failing on every push\n- Blocks confident merging of PRs\n- Prevents automated quality checks from completing","acceptance_criteria":"- [ ] All CI jobs pass on main branch\n- [ ] PowerShell linting completes without errors\n- [ ] PowerShell formatting tests pass on all platforms\n- [ ] No test failures in GitHub Actions workflow","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-11-01T19:48:13.183234077Z","updated_at":"2025-11-01T22:10:49.18271604Z","closed_at":"2025-11-01T22:10:49.182718569Z","labels":["ci","infrastructure","testing"]}
{"id":"LV-c699.1","title":"Fix PowerShell linting errors (PSScriptAnalyzer)","description":"The PowerShell linting job is failing with 'make lint' Error 1 on Windows runners.\n\nObserved in:\n- Run 18995053910 (commit 907280d)\n- Run 18996459153 (latest)\n\nError:\n```\nmake: *** [Makefile:30: lint] Error 1\n##[error]Process completed with exit code 2.\n```\n\nThis is blocking the entire CI pipeline on Windows. The linting step must pass before tests can run.\n\nInvestigation needed:\n1. Determine which PowerShell file(s) are failing linting\n2. Identify the specific PSScriptAnalyzer rule violations\n3. Fix the violations or update linting rules if appropriate","acceptance_criteria":"- [ ] PowerShell linting completes without errors on Windows runners\n- [ ] 'make lint' exits with code 0\n- [ ] All PSScriptAnalyzer warnings are resolved or suppressed appropriately","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-11-01T19:48:28.793288646Z","updated_at":"2025-11-01T22:10:31.639183163Z","closed_at":"2025-11-01T22:10:31.639186631Z","labels":["ci","linting","powershell","windows"]}
{"id":"LV-c699.2","title":"Fix PowerShell CRLF line ending format tests","description":"Multiple ShellSpec tests are failing related to CRLF line ending handling for PowerShell files on macOS and Arch Linux.\n\nFailing tests:\n1. `spec/format_line_endings_spec.sh:94` - converts PowerShell files with LF to CRLF\n2. `spec/format_line_endings_spec.sh:113` - maintains CRLF line endings in PowerShell files\n3. `spec/format_line_endings_spec.sh:132` - normalizes mixed line endings in PowerShell files to CRLF\n\nRoot cause:\nThe format-files.sh script is not properly converting or preserving CRLF (Windows-style) line endings for PowerShell files when running on Unix-based systems (macOS, Linux).\n\nImpact:\n- 6 test failures across macOS and Arch Linux runners\n- Exit code 101 on both platforms\n- These tests were confirmed pre-existing (failing since at least Oct 23)\n\nThis is lower priority than the linting errors but still needs to be fixed for CI to pass.","acceptance_criteria":"- [ ] All line ending tests pass on macOS runner\n- [ ] All line ending tests pass on Arch Linux runner\n- [ ] PowerShell files maintain CRLF line endings after formatting\n- [ ] Mixed line endings are properly normalized to CRLF","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-11-01T19:48:45.547308274Z","updated_at":"2025-11-01T20:49:31.3551836Z","closed_at":"2025-11-01T20:49:31.355186434Z","labels":["ci","line-endings","linux","macos","powershell","testing"]}
{"id":"LV-c699.3","title":"Fix PowerShell trailing whitespace/newline format tests","description":"ShellSpec tests are failing related to trailing whitespace and newline handling for PowerShell files on macOS and Arch Linux.\n\nFailing tests:\n1. `spec/format_whitespace_spec.sh:63` - adds trailing CRLF to PowerShell file that lacks one\n2. `spec/format_whitespace_spec.sh:82` - reduces multiple blank lines at end to single CRLF for PowerShell\n3. `spec/format_whitespace_spec.sh:135` - removes trailing spaces from PowerShell files while preserving CRLF\n\nRoot cause:\nThe format-files.sh script's trailing whitespace and newline normalization logic is not working correctly for PowerShell files on Unix systems, particularly when it needs to preserve or add CRLF line endings.\n\nImpact:\n- 6 test failures across macOS and Arch Linux runners\n- May be related to the CRLF line ending issues (LV-c699.2)\n- Could potentially be fixed together with line ending issues\n\nNote: This bead may have dependency on LV-c699.2 if the root cause is shared.","acceptance_criteria":"- [ ] Trailing CRLF tests pass on macOS runner\n- [ ] Trailing CRLF tests pass on Arch Linux runner  \n- [ ] Trailing whitespace is removed while preserving CRLF\n- [ ] Multiple blank lines are normalized to single CRLF","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-11-01T19:48:56.745838674Z","updated_at":"2025-11-01T20:49:36.52704453Z","closed_at":"2025-11-01T20:49:36.527047253Z","labels":["ci","linux","macos","powershell","testing","whitespace"],"dependencies":[{"issue_id":"LV-c699.3","depends_on_id":"LV-c699.2","type":"blocks","created_at":"2025-11-01T19:48:56.811093384Z","created_by":"mrdavidlaing"}]}
{"id":"LV-f76d","title":"Fix Arch Linux CI container missing 'make' package","description":"The Arch Linux CI container is failing with 'make: command not found' error.\n\nObserved in CI run 19003311597:\n- Platform: Arch Linux (archlinux:latest container on ubuntu-latest runner)\n- Step: Check formatting and lint\n- Error: /__w/_temp/d10dc99c-fa54-4418-ba05-e8b059bf591f.sh: line 15: make: command not found\n- Exit code: 127\n\nRoot cause:\nThe Arch Linux container doesn't have 'make' installed by default. This became visible after recent CI changes that started using 'make lint' command.\n\nImpact:\n- Blocks all Arch Linux CI tests\n- Prevents linting and testing from running\n- Only platform currently failing in CI\n\nInvestigation needed:\n1. Check .github/workflows CI configuration for Arch Linux container setup\n2. Determine where system dependencies are installed\n3. Add 'make' to the package list for Arch container","acceptance_criteria":"- [ ] Arch Linux CI container has 'make' installed\n- [ ] 'make lint' runs successfully in Arch container\n- [ ] All Arch Linux CI tests pass\n- [ ] No exit code 127 errors","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-11-01T22:12:56.853043969Z","updated_at":"2025-11-01T22:18:19.850374985Z","closed_at":"2025-11-01T22:18:19.850378187Z","labels":["archlinux","ci","container","infrastructure"]}
{"id":"lv-j7w","title":"WSL: xdg-open not found - configure wslview as browser opener","description":"## Problem\n\nWhen running beads-bridge serve on WSL, the browser auto-open fails with:\n```\n/bin/sh: line 1: xdg-open: command not found\n```\n\nThis happens because WSL doesn't have xdg-open by default, which is the standard Linux command to open URLs in the default browser.\n\n## Solution\n\nInstall wslu (WSL Utilities) which provides wslview - a tool that opens URLs in the Windows default browser.\n\n### Option 1: Install wslu package\n```bash\n# Ubuntu/Debian\nsudo apt install wslu\n\n# Then xdg-open alternative is available as:\nwslview http://example.com\n```\n\n### Option 2: Create xdg-open symlink/alias\nAfter installing wslu, create a symlink so xdg-open calls work:\n```bash\nsudo ln -s /usr/bin/wslview /usr/local/bin/xdg-open\n```\n\nOr add an alias to .bashrc:\n```bash\nalias xdg-open='wslview'\n```\n\n### Option 3: Set BROWSER environment variable\nSome tools check BROWSER before xdg-open:\n```bash\nexport BROWSER=wslview\n```\n\n## Verification\nAfter fix, this should open Windows browser:\n```bash\nxdg-open https://google.com\n# or\nwslview https://google.com\n```\n\n## Context\nDiscovered while running `just serve-bridge wms-rfg` in wellmaintained-skills repo on WSL.","status":"open","priority":3,"issue_type":"task","created_at":"2025-11-28T11:40:51.771961515Z","updated_at":"2025-11-28T11:40:51.771961515Z"}
